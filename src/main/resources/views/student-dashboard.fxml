<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="800.0" prefWidth="1000.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.buet.edutrack.controllers.StudentDashboardController">

   <!-- Top Navigation Bar -->
   <top>
      <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: #0f3460;" styleClass="top-bar">
         <padding>
            <Insets bottom="25" left="30" right="30" top="25" />
         </padding>
         <Label style="-fx-font-size: 28px; -fx-text-fill: #f8ffbd; -fx-font-weight: bold;" text="EduTrack" />
         <Region maxHeight="40.0" HBox.hgrow="ALWAYS" />
         <VBox alignment="CENTER_RIGHT">
            <Label fx:id="welcomeLabel" style="-fx-font-size: 18px; -fx-text-fill: white; -fx-font-weight: bold;" text="Hello!" />
            <Label style="-fx-font-size: 12px; -fx-text-fill: #cfa7d9;" text="Welcome back to EduTrack" />
         </VBox>
      </HBox>
   </top>

   <!-- Left Sidebar -->
   <left>
      <VBox alignment="TOP_CENTER" prefWidth="260" spacing="15" style="-fx-background-color: #1a1a2e;">
         <padding>
            <Insets bottom="20" left="15" right="15" top="20" />
         </padding>

         <!-- Profile Card -->
         <VBox alignment="CENTER" spacing="10" style="-fx-background-color: #16213e; -fx-background-radius: 15;">
            <padding>
               <Insets bottom="25" left="20" right="20" top="25" />
            </padding>
            <Label style="-fx-font-size: 45px;" text="ðŸ‘¤" />
            <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: white;" text="Student" />
         </VBox>

         <!-- Menu Buttons -->
         <Button prefWidth="230" style="-fx-background-color: #0f3460; -fx-text-fill: white; -fx-font-size: 15px; -fx-alignment: center-left; -fx-padding: 15 20; -fx-background-radius: 12; -fx-font-weight: bold;" styleClass="sidebar-button-active" text="ðŸ  Home" />

         <Button prefWidth="230" style="-fx-background-color: transparent; -fx-text-fill: #a0a0a0; -fx-font-size: 15px; -fx-alignment: center-left; -fx-padding: 15 20; -fx-background-radius: 12;" styleClass="sidebar-button" text="ðŸ’¬ Forum" />

         <Button fx:id="attendExamBtn" onAction="#handleAttendExam" prefWidth="230" style="-fx-background-color: transparent; -fx-text-fill: #a0a0a0; -fx-font-size: 15px; -fx-alignment: center-left; -fx-padding: 15 20; -fx-background-radius: 12;" text="ðŸ“ Attend Exam" />

         <Button fx:id="viewResultBtn" onAction="#handleViewResult" prefWidth="230" style="-fx-background-color: transparent; -fx-text-fill: #a0a0a0; -fx-font-size: 15px; -fx-alignment: center-left; -fx-padding: 15 20; -fx-background-radius: 12;" text="ðŸ“Š View Result" />

         <Button fx:id="leaderboardBtn" onAction="#handleLeaderboard" prefWidth="230" style="-fx-background-color: transparent; -fx-text-fill: #a0a0a0; -fx-font-size: 15px; -fx-alignment: center-left; -fx-padding: 15 20; -fx-background-radius: 12;" text="ðŸ† Leaderboard" />

         <!-- Logout Button (moved up) -->
         <Button fx:id="logoutButton" onAction="#handleLogout" prefWidth="230" style="-fx-background-color: #e94560; -fx-text-fill: white; -fx-font-size: 15px; -fx-alignment: center-left; -fx-padding: 15 20; -fx-background-radius: 12; -fx-font-weight: bold;" text="ðŸšª Log Out" />

         <!-- Spacer (smaller now to move logout up) -->
         <Region maxHeight="100" minHeight="80" VBox.vgrow="ALWAYS" />
      </VBox>
   </left>

   <!-- Main Content Area -->
   <center>
      <VBox spacing="30" style="-fx-background-color: #f5f5f5;">
         <padding>
            <Insets bottom="40" left="40" right="40" top="40" />
         </padding>

         <!-- Cards Grid -->
         <GridPane alignment="CENTER" hgap="30" vgap="30">
            <columnConstraints>
               <ColumnConstraints percentWidth="50" />
               <ColumnConstraints percentWidth="50" />
            </columnConstraints>
            <rowConstraints>
               <RowConstraints />
               <RowConstraints />
            </rowConstraints>

            <!-- Card 1: Attend Exam (Changed emoji to ðŸ“) -->
            <StackPane style="-fx-background-color: linear-gradient(to bottom right, #667eea 0%, #764ba2 100%); -fx-background-radius: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.25), 20, 0, 0, 8);" GridPane.columnIndex="0" GridPane.rowIndex="0">
               <VBox alignment="CENTER" maxHeight="280" maxWidth="400" spacing="12">
                  <padding>
                     <Insets bottom="35" left="40" right="40" top="35" />
                  </padding>
                  <Label style="-fx-font-size: 65px;" text="ðŸ“" />
                  <Label style="-fx-font-size: 24px; -fx-text-fill: white; -fx-font-weight: bold;" text="Attend Exam" />
                  <Label style="-fx-font-size: 14px; -fx-text-fill: rgba(255,255,255,0.9);" text="Enter to begin your test now" textAlignment="CENTER" wrapText="true" />
                  <Button onAction="#handleAttendExam" style="-fx-background-color: white; -fx-text-fill: #667eea; -fx-font-weight: bold; -fx-font-size: 13px; -fx-padding: 12 35; -fx-background-radius: 25; -fx-cursor: hand;" text="START EXAM">
                     <VBox.margin>
                        <Insets top="8" />
                     </VBox.margin>
                  </Button>
               </VBox>
            </StackPane>

            <!-- Card 2: View Results -->
            <StackPane style="-fx-background-color: linear-gradient(to bottom right, #e0e0e0 0%, #b0b0b0 100%); -fx-background-radius: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.25), 20, 0, 0, 8);" GridPane.columnIndex="1" GridPane.rowIndex="0">
               <VBox alignment="CENTER" maxHeight="280" maxWidth="400" spacing="12">
                  <padding>
                     <Insets bottom="35" left="40" right="40" top="35" />
                  </padding>
                  <Label style="-fx-font-size: 65px;" text="ðŸ“Š" />
                  <Label style="-fx-font-size: 24px; -fx-text-fill: white; -fx-font-weight: bold;" text="View Results" />
                  <Label style="-fx-font-size: 14px; -fx-text-fill: rgba(255,255,255,0.9);" text="See your scores and feedback" textAlignment="CENTER" wrapText="true" />
                  <Button onAction="#handleViewResult" style="-fx-background-color: white; -fx-text-fill: #888888; -fx-font-weight: bold; -fx-font-size: 13px; -fx-padding: 12 35; -fx-background-radius: 25; -fx-cursor: hand;" text="VIEW RESULTS">
                     <VBox.margin>
                        <Insets top="8" />
                     </VBox.margin>
                  </Button>
               </VBox>
            </StackPane>

            <!-- Card 3: Leaderboard (Button moved up) -->
            <StackPane style="-fx-background-color: linear-gradient(to bottom right, #ffeaa7 0%, #fdcb6e 100%); -fx-background-radius: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.25), 20, 0, 0, 8);" GridPane.columnIndex="0" GridPane.rowIndex="1">
               <VBox alignment="CENTER" maxHeight="280" maxWidth="400" spacing="12">
                  <padding>
                     <Insets bottom="40" left="40" right="40" top="30" />
                  </padding>
                  <Label style="-fx-font-size: 65px;" text="ðŸ†" />
                  <Label style="-fx-font-size: 24px; -fx-text-fill: white; -fx-font-weight: bold;" text="Leaderboard" />
                  <Label style="-fx-font-size: 14px; -fx-text-fill: rgba(255,255,255,0.9);" text="See top performers and compete" textAlignment="CENTER" wrapText="true" />
                  <Button onAction="#handleLeaderboard" style="-fx-background-color: white; -fx-text-fill: #fdcb6e; -fx-font-weight: bold; -fx-font-size: 13px; -fx-padding: 12 35; -fx-background-radius: 25; -fx-cursor: hand;" text="VIEW RANKINGS">
                     <VBox.margin>
                        <Insets top="5" />
                     </VBox.margin>
                  </Button>
               </VBox>
            </StackPane>

            <!-- Card 4: Practice (Button moved up) -->
            <StackPane style="-fx-background-color: linear-gradient(to bottom right, #a29bfe 0%, #6c5ce7 100%); -fx-background-radius: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.25), 20, 0, 0, 8);" GridPane.columnIndex="1" GridPane.rowIndex="1">
               <VBox alignment="CENTER" maxHeight="280" maxWidth="400" spacing="12">
                  <padding>
                     <Insets bottom="40" left="40" right="40" top="30" />
                  </padding>
                  <Label style="-fx-font-size: 65px;" text="ðŸ”„" />
                  <Label style="-fx-font-size: 24px; -fx-text-fill: white; -fx-font-weight: bold;" text="Practice Mode" />
                  <Label style="-fx-font-size: 14px; -fx-text-fill: rgba(255,255,255,0.9);" text="Retry wrong questions to improve" textAlignment="CENTER" wrapText="true" />
                  <Button onAction="#handlePractice" style="-fx-background-color: white; -fx-text-fill: #6c5ce7; -fx-font-weight: bold; -fx-font-size: 13px; -fx-padding: 12 35; -fx-background-radius: 25; -fx-cursor: hand;" text="START PRACTICE">
                     <VBox.margin>
                        <Insets top="5" />
                     </VBox.margin>
                  </Button>
               </VBox>
            </StackPane>

         </GridPane>
      </VBox>
   </center>
</BorderPane>
